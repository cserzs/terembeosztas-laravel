(function(o){function e(e){for(var n,i,r=e[0],s=e[1],l=e[2],u=0,m=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(c,i)&&c[i]&&m.push(c[i][0]),c[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(o[n]=s[n]);d&&d(e);while(m.length)m.shift()();return a.push.apply(a,l||[]),t()}function t(){for(var o,e=0;e<a.length;e++){for(var t=a[e],n=!0,r=1;r<t.length;r++){var s=t[r];0!==c[s]&&(n=!1)}n&&(a.splice(e--,1),o=i(i.s=t[0]))}return o}var n={},c={app:0},a=[];function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=o,i.c=n,i.d=function(o,e,t){i.o(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:t})},i.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,e){if(1&e&&(o=i(o)),8&e)return o;if(4&e&&"object"===typeof o&&o&&o.__esModule)return o;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var n in o)i.d(t,n,function(e){return o[e]}.bind(null,n));return t},i.n=function(o){var e=o&&o.__esModule?function(){return o["default"]}:function(){return o};return i.d(e,"a",e),e},i.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=s;a.push([0,"chunk-vendors"]),t()})({0:function(o,e,t){o.exports=t("56d7")},"1e82":function(o,e,t){"use strict";t("6133")},3527:function(o,e,t){},"519c":function(o,e,t){},"56d7":function(o,e,t){"use strict";t.r(e);t("e260"),t("e6cf"),t("cca6"),t("a79d");var n=t("7a23"),c={key:0,class:"loadingScreen"},a=Object(n["f"])("div",null,"Loading...",-1),i={class:"columns"},r=Object(n["f"])("div",{class:"column is-1"},null,-1),s={class:"column"},l={class:"column currentDay"},d={class:"column"},u={class:"column"},m={class:"grid-container"},f={class:"date-column"},b=Object(n["f"])("div",{class:"cell"}," ",-1),p={class:"flex-container"},h={class:"schoolclass-name cell"};function g(o,e,t,g,v,j){var O=Object(n["m"])("DayDropdownComponent"),y=Object(n["m"])("PositionComponent"),k=Object(n["m"])("RoomSelectDialogComponent"),D=Object(n["m"])("DuplicateroomsDialogComponent");return Object(n["h"])(),Object(n["c"])(n["a"],null,[v.isLoadingScreenVisible?(Object(n["h"])(),Object(n["c"])("div",c,[a])):Object(n["d"])("",!0),Object(n["f"])("div",null,[Object(n["f"])("div",i,[r,Object(n["f"])("div",s,[Object(n["f"])(O,{currentDay:v.currentDay,onHandleDayClick:j.handleDayClick},null,8,["currentDay","onHandleDayClick"])]),Object(n["f"])("div",l,Object(n["n"])(j.getCurrentDay),1),Object(n["f"])("div",d,[Object(n["f"])("button",{class:"button is-info",onClick:e[1]||(e[1]=function(){return j.openDuplicateCheckDialog&&j.openDuplicateCheckDialog.apply(j,arguments)})},"Dupla órák ellenőrzése")]),Object(n["f"])("div",u,[Object(n["f"])("button",{class:"button is-info",onClick:e[2]||(e[2]=function(){return j.confirmFullDelete&&j.confirmFullDelete.apply(j,arguments)})},"Minden óra törlése")])]),Object(n["f"])("div",m,[Object(n["f"])("div",f,[b,(Object(n["h"])(!0),Object(n["c"])(n["a"],null,Object(n["l"])(j.idopontok,(function(o){return Object(n["h"])(),Object(n["c"])("div",{key:o,class:"cell idopontok"},Object(n["n"])(o)+". óra",1)})),128))]),Object(n["f"])("div",p,[(Object(n["h"])(!0),Object(n["c"])(n["a"],null,Object(n["l"])(j.roomcatalogs,(function(o){return Object(n["h"])(),Object(n["c"])("div",{class:"schoolclass-column",key:o.class_id},[Object(n["f"])("div",h,Object(n["n"])(j.getClass(o.class_id).nev),1),(Object(n["h"])(!0),Object(n["c"])(n["a"],null,Object(n["l"])(o.roomcatalog,(function(e,t){return Object(n["h"])(),Object(n["c"])("div",{class:"cell",key:t},[(Object(n["h"])(!0),Object(n["c"])(n["a"],null,Object(n["l"])(e,(function(c,a){return Object(n["h"])(),Object(n["c"])(y,{key:a,roomId:c,classId:o.class_id,groupId:a,position:t,roomName:j.getRoom(c).nev,isLast:a==e.length-1,onPositionClick:j.handlePositionClick},null,8,["roomId","classId","groupId","position","roomName","isLast","onPositionClick"])})),128)),Object(n["f"])(y,{roomId:-1,classId:o.class_id,position:t,groupId:e.length,roomName:"+",isNewPosition:!0,onPositionClick:j.handleSelectRoom},null,8,["classId","position","groupId","onPositionClick"])])})),128))])})),128))])]),v.isRoomSelectVisible?(Object(n["h"])(),Object(n["c"])(k,{key:0,rooms:j.rooms,title:v.roomselectTitle,isRoomReserved:j.isRoomReserved,onCloseEvent:j.closeRoomselectDialog,onRoomClick:j.handleRoomClick},null,8,["rooms","title","isRoomReserved","onCloseEvent","onRoomClick"])):Object(n["d"])("",!0),v.isDuplicateCheckVisible?(Object(n["h"])(),Object(n["c"])(D,{key:1,day:v.currentDay,maxPos:j.idopontok.length,getRoom:j.getRoom,onCloseEvent:j.closeDuplicateCheckDialog},null,8,["day","maxPos","getRoom","onCloseEvent"])):Object(n["d"])("",!0)])],64)}var v=t("1da1"),j=(t("7db0"),t("99af"),t("96cf"),{class:"dropdown is-hoverable"}),O=Object(n["f"])("div",{class:"dropdown-trigger"},[Object(n["f"])("button",{class:"button is-info","aria-haspopup":"true","aria-controls":"dropdown-menu"},[Object(n["f"])("span",null,"Válassz napot!"),Object(n["f"])("span",{class:"icon is-small"},[Object(n["f"])("i",{class:"fas fa-angle-down","aria-hidden":"true"})])])],-1),y={class:"dropdown-menu",id:"dropdown-menu",role:"menu"},k={class:"dropdown-content"};function D(o,e,t,c,a,i){var r=Object(n["m"])("DayComponent");return Object(n["h"])(),Object(n["c"])("div",j,[O,Object(n["f"])("div",y,[Object(n["f"])("div",k,[(Object(n["h"])(),Object(n["c"])(n["a"],null,Object(n["l"])(5,(function(c){return Object(n["f"])(r,{key:c,id:c-1,currentDay:t.currentDay,dayName:a.days[c-1],onDayClick:e[1]||(e[1]=function(e){return o.$emit("handleDayClick",e)})},null,8,["id","currentDay","dayName"])})),64))])])])}t("a9e3");function R(o,e,t,c,a,i){return Object(n["h"])(),Object(n["c"])("a",{href:"javascript:void(0)",onClick:e[1]||(e[1]=function(e){return o.$emit("dayClick",t.id)}),class:["dropdown-item",{"is-active":t.currentDay==t.id}]},Object(n["n"])(t.dayName),3)}var C={name:"DayComponent",props:{id:Number,currentDay:Number,dayName:String}};C.render=R;var w=C,I={name:"DayDropdownComponent",components:{DayComponent:w},data:function(){return{days:["Hétfő","Kedd","Szerda","Csütörtök","Péntek"]}},props:{currentDay:Number},emits:["handleDayClick"]};I.render=D;var P=I,S=Object(n["p"])("data-v-32afd4d5");Object(n["j"])("data-v-32afd4d5");var _={key:0};Object(n["i"])();var N=S((function(o,e,t,c,a,i){return Object(n["h"])(),Object(n["c"])(n["a"],null,[Object(n["f"])("a",{href:"javascript:void(0)",onClick:e[1]||(e[1]=function(e){return o.$emit("positionClick",t.roomId,t.classId,t.position,t.groupId,t.isLast)}),class:["tag roomposition",{newPosition:t.isNewPosition,betuszin:!t.isNewPosition}]},Object(n["n"])(t.roomName),3),t.isNewPosition?Object(n["d"])("",!0):(Object(n["h"])(),Object(n["c"])("span",_," / "))],64)})),z={name:"PositionComponent",props:{classId:Number,position:Number,groupId:Number,roomName:String,isLast:Boolean,roomId:Number,isNewPosition:{type:Boolean,default:!1}},emits:["positionClick"]};t("84a2");z.render=N,z.__scopeId="data-v-32afd4d5";var $=z,A={class:"modal is-active"},x=Object(n["f"])("div",{class:"modal-background"},null,-1),E={class:"modal-card"},L={class:"modal-card-head"},V={class:"modal-card-title"},T={class:"modal-card-body"},M={class:"modal-card-foot"},H=Object(n["f"])("span",null,"Jelmagyarázat: kék - nincs használatban, fehér - használatban van",-1);function B(o,e,t,c,a,i){return Object(n["h"])(),Object(n["c"])("div",A,[x,Object(n["f"])("div",E,[Object(n["f"])("header",L,[Object(n["f"])("p",V,Object(n["n"])(t.title),1),Object(n["f"])("button",{class:"delete","aria-label":"close",onClick:e[1]||(e[1]=function(e){return o.$emit("closeEvent")})})]),Object(n["f"])("section",T,[Object(n["f"])("div",null,[(Object(n["h"])(!0),Object(n["c"])(n["a"],null,Object(n["l"])(t.rooms,(function(c){return Object(n["h"])(),Object(n["c"])("button",{key:c.id,class:["button roomButton",{"is-link":!t.isRoomReserved(c.id)}],onClick:function(e){return o.$emit("roomClick",c.id)},onMouseover:function(o){return i.showDesc(c)},onMouseout:e[2]||(e[2]=function(){return i.hideDesc&&i.hideDesc.apply(i,arguments)})},Object(n["n"])(c.nev),43,["onClick","onMouseover"])})),128))]),Object(n["f"])("div",{innerHTML:a.roomDesc,class:"roomDesc"},null,8,["innerHTML"])]),Object(n["f"])("footer",M,[Object(n["f"])("button",{class:"button is-dark",onClick:e[3]||(e[3]=function(e){return o.$emit("closeEvent")})},"Bezár"),H])])])}var F={name:"RoomSelectDialogComponent",props:{title:String,rooms:Array,isRoomReserved:Function},data:function(){return{roomDesc:"&nbsp;"}},methods:{showDesc:function(o){o.megjegyzes&&(this.roomDesc=o.megjegyzes)},hideDesc:function(){this.roomDesc="&nbsp;"}}};t("6306");F.render=B;var J=F,K=Object(n["p"])("data-v-41a168a0");Object(n["j"])("data-v-41a168a0");var q={class:"modal is-active"},G=Object(n["f"])("div",{class:"modal-background"},null,-1),Q={class:"modal-card"},U={class:"modal-card-head"},W=Object(n["f"])("p",{class:"modal-card-title"},"Többször is kiosztott órák",-1),X={class:"modal-card-body"},Y={key:0},Z={key:0},oo={class:"modal-card-foot"};Object(n["i"])();var eo=K((function(o,e,t,c,a,i){return Object(n["h"])(),Object(n["c"])("div",q,[G,Object(n["f"])("div",Q,[Object(n["f"])("header",U,[W,Object(n["f"])("button",{class:"delete","aria-label":"close",onClick:e[1]||(e[1]=function(e){return o.$emit("closeEvent")})})]),Object(n["f"])("section",X,[Object(n["f"])("ul",null,[(Object(n["h"])(!0),Object(n["c"])(n["a"],null,Object(n["l"])(a.roomlist,(function(o,e){return Object(n["h"])(),Object(n["c"])("li",{key:e},[Object(n["e"])(Object(n["n"])(e)+". óra: ",1),o.length<1?(Object(n["h"])(),Object(n["c"])("span",Y,"-")):Object(n["d"])("",!0),(Object(n["h"])(!0),Object(n["c"])(n["a"],null,Object(n["l"])(o,(function(o,e){return Object(n["h"])(),Object(n["c"])("span",{key:e},[e>0?(Object(n["h"])(),Object(n["c"])("span",Z,", ")):Object(n["d"])("",!0),Object(n["e"])(Object(n["n"])(o.nev)+" ("+Object(n["n"])(o.num)+" db)",1)])})),128))])})),128))])]),Object(n["f"])("footer",oo,[Object(n["f"])("button",{class:"button is-dark",onClick:e[2]||(e[2]=function(e){return o.$emit("closeEvent")})},"Bezár")])])])})),to=t("bc3a"),no=t.n(to),co={name:"DuplicateroomsDialogComponent",props:{day:Number,maxPos:Number,getRoom:Function},created:function(){var o=this;no.a.get("/api/roombindings/checkduplicate/"+this.day).then((function(e){o.roomlist=[];for(var t=0;t<o.maxPos;t++)o.roomlist[t]=[];for(var n=0;n<e.data.length;n++)o.roomlist[e.data[n].idopont].push({nev:o.getRoom(e.data[n].terem_id).nev,num:e.data[n].num})})).catch((function(o){console.warn("Duplicate check hiba: "+o),alert("Nem sikerült a művelet!")}))},data:function(){return{roomlist:[]}},methods:{}};t("af18");co.render=eo,co.__scopeId="data-v-41a168a0";var ao,io,ro,so=co,lo="",uo={name:"App",components:{DayDropdownComponent:P,RoomSelectDialogComponent:J,PositionComponent:$,DuplicateroomsDialogComponent:so},created:function(){this.loadAll(0)},data:function(){return{days:["Hétfő","Kedd","Szerda","Csütörtök","Péntek"],currentDay:0,isLoadingScreenVisible:!0,roomselectTitle:"",isRoomSelectVisible:!1,isDuplicateCheckVisible:!1}},computed:{idopontok:function(){return this.$store.getters.idopontok},rooms:function(){return this.$store.getters.getRooms},roomcatalogs:function(){return this.$store.getters.getRoomCatalogs},schoolclasses:function(){return this.$store.getters.getSchoolclasses},reservedRooms:function(){return this.$store.getters.getReservedRooms},getCurrentDay:function(){return this.days[this.currentDay]}},methods:{proba:function(){var o=this;this.$store.dispatch("proba").catch((function(e){o._showError("Proba hiba",e)}))},loadAll:function(o){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isLoadingScreenVisible=!0,e.currentDay=o,e.$store.dispatch("loadAll",{currentDay:o}).then((function(){e.isLoadingScreenVisible=!1}));case 3:case"end":return t.stop()}}),t)})))()},getClass:function(o){var e=this.schoolclasses.find((function(e){return e.id===o}));return void 0===e&&console.warn("Hibás osztály id: "+o),e},getRoom:function(o){var e=this.rooms.find((function(e){return e.id===o}));return void 0===e&&console.warn("Hibás terem id: "+o),e},getRoomAt:function(o,e,t){var n=this.$store.getters.getRoomAt(o,e,t);return this.getRoom(n)},isRoomReserved:function(o){var e=this.reservedRooms.find((function(o){return o.pos===io}));return e.roomlist.indexOf(o)>-1},handleDayClick:function(o){this.loadAll(o)},handlePositionClick:function(o,e,t,n,c){var a=this;c?this.$store.dispatch("deleteRoom",{roomId:o,day:this.currentDay,classId:e,pos:t,groupId:n}).catch((function(o){a._showError("Delete room hiba",o)})):this.prepareChangeRoom(e,t,n)},handleSelectRoom:function(o,e,t,n){this.saveSelection(e,t,n,"add");var c=this.getClass(e);this.showRoomSelectDialog("Új terem: ".concat(c.nev,", ").concat(t,". óra"))},handleRoomClick:function(o){var e=this;if("add"==lo)this.$store.dispatch("addRoom",{day:this.currentDay,classId:ao,pos:io,groupId:ro,roomId:o}).catch((function(o){e._showError("Add room hiba",o)}));else if("change"==lo){var t=this.getRoomAt(ao,io,ro);t.id!==o&&this.$store.dispatch("changeRoom",{day:this.currentDay,classId:ao,pos:io,groupId:ro,roomId:o}).catch((function(o){e._showError("Change room hiba",o)}))}this.closeRoomselectDialog()},prepareChangeRoom:function(o,e,t){this.saveSelection(o,e,t,"change");var n=this.getClass(o),c=this.getRoomAt(o,e,t);this.showRoomSelectDialog("Teremcsere: ".concat(n.nev,", ").concat(e,". óra (jelenlegi: ").concat(c.nev,")"))},showRoomSelectDialog:function(o){this.roomselectTitle=o,this.isRoomSelectVisible=!0},closeRoomselectDialog:function(){this.isRoomSelectVisible=!1},openDuplicateCheckDialog:function(){this.isDuplicateCheckVisible=!0},closeDuplicateCheckDialog:function(){this.isDuplicateCheckVisible=!1},saveSelection:function(o,e,t,n){ao=o,io=e,ro=t,lo=n},confirmFullDelete:function(){var o=this;confirm("Biztos törlöd az egész napi terembeosztást?\nNem lehet visszavonni!!")&&this.$store.dispatch("deleteAllCatalog",{day:this.currentDay}).then((function(){o.loadAll(o.currentDay)})).catch((function(e){o._showError("Delete all hiba!",e)}))},_showError:function(o,e){console.warn(o+" "+e),alert("Nem sikerült a művelet!")}}};t("1e82");uo.render=g;var mo=uo,fo=t("3835"),bo=(t("a434"),t("d3b7"),t("3ca3"),t("ddb0"),t("5502")),po=[{id:1,nev:"-",desc:""},{id:2,nev:"133",desc:"info"},{id:3,nev:"006",desc:""},{id:4,nev:"218",desc:""},{id:5,nev:"Tesi",desc:""}],ho=[{id:1,nev:"9.a"},{id:2,nev:"9.b"},{id:3,nev:"9.c"},{id:4,nev:"9.d"},{id:5,nev:"10.a"},{id:6,nev:"1/13.a"}],go=[{class_id:1,roomcatalog:[[],[2,3],[4],[],[],[],[],[],[]]},{class_id:2,roomcatalog:[[],[],[],[],[],[],[],[],[]]},{class_id:3,roomcatalog:[[],[],[],[],[],[],[],[],[]]},{class_id:4,roomcatalog:[[],[],[],[],[],[],[],[],[]]},{class_id:5,roomcatalog:[[],[],[],[],[],[],[],[],[]]},{class_id:6,roomcatalog:[[],[],[],[],[],[],[],[],[]]}],vo={idopontok:[0,1,2,3,4,5,6,7,8],rooms:[],reservedRooms:[],schoolclasses:[],roomcatalogs:[]},jo={loadRooms:function(o,e){o.rooms=e},loadCatalogs:function(o,e){o.roomcatalogs=e},loadSchoolclasses:function(o,e){o.schoolclasses=e},loadReservedRooms:function(o,e){o.reservedRooms=e},addRoomToCatalog:function(o,e){var t=ko(o,e.classId,e.pos);t.push(e.roomId);var n=Do(o,e.pos);n.push(e.roomId)},removeRoomFromcatalog:function(o,e){var t=ko(o,e.classId,e.pos),n=t.pop(),c=Do(o,e.pos),a=c.indexOf(n);c.splice(a,1)},changeRoomInCatalog:function(o,e){var t=ko(o,e.classId,e.pos),n=t[e.groupId];t[e.groupId]=e.roomId;var c=Do(o,e.pos),a=c.indexOf(n);c.splice(a,1),c.push(e.roomId)}},Oo={loadAllDev:function(o,e){return new Promise((function(e,t){o.commit("loadRooms",po),o.commit("loadSchoolclasses",ho);var n=go;o.commit("loadCatalogs",go);for(var c=[],a=0;a<o.getters.idopontok.length;a++){for(var i={pos:a,roomlist:[]},r=0;r<n.length;r++)for(var s=0;s<n[r].roomcatalog[a].length;s++)i.roomlist.push(n[r].roomcatalog[a][s]);c.push(i)}o.commit("loadReservedRooms",c),e()}))},loadAll:function(o,e){return Object(v["a"])(regeneratorRuntime.mark((function t(){var n,c,a,i,r,s,l,d,u,m,f,b,p,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=no.a.get("/api/rooms"),c=no.a.get("/api/classes"),a=no.a.get("/api/catalogofday/"+e.currentDay),t.next=5,Promise.all([n,c,a]);case 5:for(i=t.sent,r=Object(fo["a"])(i,3),s=r[0],l=r[1],d=r[2],o.commit("loadRooms",s.data),o.commit("loadSchoolclasses",l.data),o.commit("loadCatalogs",d.data),u=d.data,m=[],f=0;f<o.getters.idopontok.length;f++){for(b={pos:f,roomlist:[]},p=0;p<u.length;p++)for(h=0;h<u[p].roomcatalog[f].length;h++)b.roomlist.push(u[p].roomcatalog[f][h]);m.push(b)}o.commit("loadReservedRooms",m);case 17:case"end":return t.stop()}}),t)})))()},addRoom:function(o,e){return new Promise((function(t,n){no.a.post("/api/roombindings",{osztalyid:e.classId,nap:e.day,idopont:e.pos,pozicio:e.groupId,teremid:e.roomId}).then((function(){o.commit("addRoomToCatalog",e)})).catch((function(o){n(o)}))}))},proba:function(){return new Promise((function(o,e){no.a.get("/api/akarmi").then((function(e){console.log("sikeres keres"),o("ok")})).catch((function(o){console.log("nem sikerult"),console.log(o),e("nem ok")}))}))},deleteRoom:function(o,e){return new Promise((function(t,n){no.a.delete("/api/roombindings/"+e.classId+"/"+e.day+"/"+e.pos+"/"+e.groupId+"/"+e.roomId).then((function(){o.commit("removeRoomFromcatalog",e)})).catch((function(o){n(o)}))}))},changeRoom:function(o,e){return new Promise((function(t,n){no.a.put("/api/roombindings/"+e.classId+"/"+e.day+"/"+e.pos+"/"+e.groupId+"/"+e.roomId).then((function(){o.commit("changeRoomInCatalog",e)})).catch((function(o){n(o)}))}))},deleteAllCatalog:function(o,e){return new Promise((function(o,t){no.a.delete("/api/dailyroombindings/"+e.day).then((function(){o()})).catch((function(o){t(o)}))}))}},yo={isAllLoaded:function(o){return o.allLoaded},idopontok:function(o){return o.idopontok},getRoomCatalogs:function(o){return o.roomcatalogs},getRooms:function(o){return o.rooms},getRoomById:function(o){return function(e){return o.rooms.find((function(o){return o.id===e}))}},getRoomAt:function(o){return function(e,t,n){var c=ko(o,e,t);return c[n]}},getSchoolclasses:function(o){return o.schoolclasses},getReservedRooms:function(o){return o.reservedRooms}};function ko(o,e,t){var n=o.roomcatalogs.find((function(o){return o.class_id==e}));return n.roomcatalog[t]}function Do(o,e){var t=o.reservedRooms.find((function(o){return o.pos===e}));return t.roomlist}var Ro=Object(bo["a"])({state:vo,mutations:jo,actions:Oo,getters:yo});Object(n["b"])(mo).use(Ro).mount("#app")},6133:function(o,e,t){},6306:function(o,e,t){"use strict";t("519c")},"84a2":function(o,e,t){"use strict";t("ca7a")},af18:function(o,e,t){"use strict";t("3527")},ca7a:function(o,e,t){}});
//# sourceMappingURL=app.e28df376.js.map